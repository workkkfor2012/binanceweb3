çˆ¬è™«ç«¯å·²ç»ä¼ é€’äº†meme å·²è¿ç§»æ‰€æœ‰çš„å­—æ®µ,ä¸€æ­¥åˆ°ä½ï¼Œä¼ è¾“å…¨éƒ¨å­—æ®µï¼Œï¼Œä½ è§‰å¾—å‰ç«¯æœ‰å“ªäº›å­—æ®µå¯ä»¥ç”¨èµ·æ¥ï¼Œç”¨äºæ›´å¥½çš„æ•æ‰çƒ­ç‚¹ï¼Œæˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•ï¼ŒmigrateTime-createTimeï¼Œä¹Ÿå°±æ˜¯ä»å‘å¸åˆ°è¿ç§»èŠ±çš„æ—¶é—´è¶ŠçŸ­ï¼Œè¿™ä¸ªå¸å°±è¶Šçƒ­firstSeen: '1764648938751'chainId: '56'contractAddress: '0xd4e0e063e1e7b90afec8668f6b8785066db94444'symbol: '2026'name: '2026'icon: 'https://static.four.meme/market/6bea4c8c-4d91-416c...'caIcon: 'null'iconStatus: '1'caIconStatus: '1'createTime: '1764590830000'height: '70119104'twitter: 'null'website: 'null'telegram: 'null'progress: '91.37'protocol: '2001'holders: '174'liquidity: '21791.49'volume: '12525.71'marketCap: '46675.4'count: '363'countBuy: '319'countSell: '44'holdersTop10Percent: '45'holdersDevPercent: 'null'holdersSniperPercent: '72'holdersInsiderPercent: 'null'devSellPercent: 'null'migrateStatus: 'false'migrateTime: '0'paidOnDexScreener: 'false'devMigrateCount: '1'decimal: '18'sensitiveToken: 'false'exclusive: 'false'meme-extractor.tså·²ç»å°†æ‰€æœ‰å­—æ®µä¼ é€’åˆ°ruståç«¯äº†å•Šï¼Œåç«¯è½¬å‘æ‰€æœ‰çš„å­—æ®µä»¥ä¸‹æ˜¯å…¶ä»–çš„AIçš„ä¿®æ”¹æ„è§ï¼Œä¾›ä½ å‚è€ƒâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„åˆ‡å…¥ç‚¹ï¼â€œä»å‘å¸åˆ°è¿ç§»ï¼ˆå‘å°„ï¼‰çš„æ—¶é—´è¶ŠçŸ­ï¼Œçƒ­åº¦è¶Šé«˜â€ è¿™ä¸ªé€»è¾‘åœ¨ Meme äº¤æ˜“ä¸­æ˜¯éå¸¸æ ¸å¿ƒçš„â€œé‡‘ç‹—â€æŒ‡æ ‡ï¼ˆTime to Bondï¼‰ã€‚è¿™ä»£è¡¨äº†ç¤¾åŒºçš„ FOMOï¼ˆé”™å¤±ææƒ§ï¼‰ç¨‹åº¦å’Œèµ„é‡‘æ¶Œå…¥çš„é€Ÿåº¦ã€‚é™¤äº†ä½ æåˆ°çš„ migrateTime - createTimeï¼Œæ ¹æ®ä½ æä¾›çš„å­—æ®µï¼Œæˆ‘è¿˜å¼ºçƒˆå»ºè®®åˆ©ç”¨ä»¥ä¸‹å­—æ®µæ¥æ•æ‰çƒ­ç‚¹å’Œè§„é¿é£é™©ï¼špaidOnDexScreener (æ˜¯å¦ä»˜è´¹æ¨å¹¿):ç”¨é€”: è¿™æ˜¯ä¸€ä¸ªæå¼ºçš„çœ‹æ¶¨ä¿¡å·ã€‚å¦‚æœ Dev æˆ–ç¤¾åŒºæ„¿æ„èŠ±é’±åœ¨ DexScreener ä¸Šåšå¹¿å‘Šæˆ–æ›´æ–°ä¿¡æ¯ï¼Œè¯´æ˜ä»–ä»¬æœ‰è¥é”€é¢„ç®—ä¸”æƒ³æŠŠç›˜å­åšå¤§ï¼Œè€Œä¸æ˜¯ç®€å•çš„â€œä¸€æ³¢æµâ€ Rugã€‚å±•ç¤º: æ˜¾ç¤ºä¸€ä¸ª "AD" æˆ– "Paid" çš„é‡‘æ ‡ã€‚holdersSniperPercent (ç‹™å‡»æ‰‹æŒä»“å æ¯”):ç”¨é€”: è¿™æ˜¯ä¸€ä¸ªé£é™©æŒ‡æ ‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡é«˜ï¼ˆæ¯”å¦‚ > 60%ï¼‰ï¼Œè¯´æ˜å¤§é‡ç­¹ç é›†ä¸­åœ¨ç‹™å‡»æœºå™¨äººæ‰‹ä¸­ï¼Œå¼€ç›˜ç ¸ç›˜é£é™©æé«˜ã€‚å±•ç¤º: å¦‚æœ > 50%ï¼Œæ˜¾ç¤ºçº¢è‰²è­¦å‘Š "ğŸ¯ Sniper: 72%"ã€‚countBuy vs countSell (ä¹°å–å•æ•°):ç”¨é€”: æƒ…ç»ªæŒ‡æ ‡ã€‚æ¯”å•çº¯çš„ Volume æ›´èƒ½åæ˜ æ•£æˆ·å‚ä¸åº¦ã€‚å¦‚æœä¹°å•æ•°è¿œå¤§äºå–å•æ•°ï¼ˆä¾‹å¦‚ 10:1ï¼‰ï¼Œè¯´æ˜æƒ…ç»ªé«˜æ¶¨ã€‚å±•ç¤º: æ˜¾ç¤ºä¸€ä¸ªä¹°å–åŠ›åº¦çš„æ¯”ä¾‹æ¡æˆ–æ•°å€¼ï¼ˆå¦‚ "319 ğŸŸ¢ / 44 ğŸ”´"ï¼‰ã€‚devMigrateCount (Dev å‘å°„æ¬¡æ•°):ç”¨é€”: Dev è¡Œä¸ºç”»åƒã€‚å¦‚æœè¿™ä¸ªæ•°æ˜¯ 1ï¼Œå¯èƒ½æ˜¯æ–°å·ï¼›å¦‚æœå¾ˆå¤§ï¼Œè¦ç»“åˆè¿‡å¾€æ¥çœ‹ã€‚å±•ç¤º: å·²ç»åœ¨ç°æœ‰ä»£ç ä¸­ï¼Œå¯ä»¥å¼ºåŒ–æ˜¾ç¤ºã€‚ä¸‹é¢æˆ‘å°†åˆ†ä¸‰æ­¥æ¥å®ç°è¿™äº›åŠŸèƒ½ï¼šExtractor: æ›´æ–°æ•°æ®æ¸…æ´—é€»è¾‘ï¼Œé€ä¼ è¿™äº›æ–°å­—æ®µã€‚Frontend Types: æ›´æ–°ç±»å‹å®šä¹‰ã€‚Frontend Page: æ›´æ–°å¡ç‰‡ UIï¼Œå¢åŠ â€œæé€Ÿå‘å°„æ—¶é—´â€ã€â€œç‹™å‡»æ‰‹è­¦å‘Šâ€ã€â€œä»˜è´¹æ¨å¹¿é‡‘æ ‡â€ç­‰è§†è§‰å…ƒç´ ã€‚1. æ›´æ–°æ•°æ®æå–å™¨ (Extractor)æˆ‘ä»¬éœ€è¦åœ¨ normalizeData ä¸­æŠŠè¿™äº›æœ‰ä»·å€¼çš„åŸå§‹å­—æ®µæå–å‡ºæ¥ã€‚<file path="packages/extractor/src/meme-extractor.ts"><![CDATA[// packages/extractor/src/meme-extractor.tsimport { chromium } from 'playwright-extra';import type { Browser, Page } from 'playwright';import stealth from 'puppeteer-extra-plugin-stealth';import { handleGuidePopup, checkAndClickCookieBanner } from './pageInitializer';import * as logger from './logger';import { io, Socket } from 'socket.io-client';import type { MemeItem } from 'shared-types';chromium.use(stealth());// ==============================================================================// --- âš™ï¸ é…ç½®åŒºåŸŸ ---// ==============================================================================const SERVER_URL = 'http://localhost:3001';const MY_CHROME_PATH = 'F:\Program Files\Google\Chrome\Application\chrome.exe';const TARGET_URL = 'https://web3.binance.com/zh-CN/meme-rush?chain=bsc';const CAPTURE_CONFIG = {// ğŸ¯ ç›®æ ‡: 'migrated'targetCategory: 'migrated' as 'new' | 'migrated',interval: 1000,proxy: 'socks5://127.0.0.1:1080',maxRetries: 5};// ==============================================================================// --- ğŸ§  æ ¸å¿ƒæ‰«æè„šæœ¬ ---// ==============================================================================const SCANNER_LOGIC_SCRIPT = `(() => {window.MemeScannerEngine = {fiberCache: null, code Codedownloadcontent_copyexpand_less Â  Â getReactFiber(el) {Â  Â  Â  Â  const key = Object.keys(el).find(k => k.startsWith('__reactFiber$'));Â  Â  Â  Â  return key ? el[key] : null;Â  Â  },Â  Â  isValidTokenList(list) {Â  Â  Â  Â  if (!Array.isArray(list) || list.length < 2) return false;Â  Â  Â  Â  const first = list[0];Â  Â  Â  Â  if (!first || typeof first !== 'object') return false;Â  Â  Â  Â  return !!first.symbol;Â  Â  },Â  Â  identifyType(list) {Â  Â  Â  Â  const first = list[0];Â  Â  Â  Â  const mStatus = String(first.migrateStatus);Â  Â  Â  Â  const progress = parseFloat(first.progress || '0');Â  Â  Â  Â  if (mStatus === 'true' || progress >= 99) return 'migrated';Â  Â  Â  Â  return 'new';Â  Â  },Â  Â  scan() {Â  Â  Â  Â  // 1. ç¼“å­˜ç­–ç•¥Â  Â  Â  Â  if (this.fiberCache) {Â  Â  Â  Â  Â  Â  try {Â  Â  Â  Â  Â  Â  Â  Â  const data = this.fiberCache.memoizedProps?.value || this.fiberCache.memoizedProps;Â  Â  Â  Â  Â  Â  Â  Â  let list = null;Â  Â  Â  Â  Â  Â  Â  Â  if (data) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (Array.isArray(data.allTokens)) list = data.allTokens;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (Array.isArray(data.currentTokens)) list = data.currentTokens;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (Array.isArray(data)) list = data;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Object.values(data).forEach(v => {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (this.isValidTokenList(v)) list = v;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â });Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  if (list && this.isValidTokenList(list)) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const type = this.identifyType(list);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (type === '${CAPTURE_CONFIG.targetCategory}') {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ä¼˜å…ˆå– migrateTimeÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const time = type === 'migrated' Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ? parseInt(list[0].migrateTime || 0)Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  : parseInt(list[0].createTime || list[0].startTime || 0);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return [{Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  source: 'cache',Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: type,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  count: list.length,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  time: time,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: listÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }];Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  } catch(e) {}Â  Â  Â  Â  Â  Â  this.fiberCache = null; Â  Â  Â  Â  }Â  Â  Â  Â  // 2. æ·±åº¦æ‰«æ (MAX_CLIMB = 60)Â  Â  Â  Â  const allElements = document.querySelectorAll('div, span, section, main, ul, li, a, img, h2, h3');Â  Â  Â  Â  const visitedFibers = new WeakSet();Â  Â  Â  Â  const foundLists = [];Â  Â  Â  Â  for (const el of allElements) {Â  Â  Â  Â  Â  Â  let fiber = this.getReactFiber(el);Â  Â  Â  Â  Â  Â  let depth = 0;Â  Â  Â  Â  Â  Â  const MAX_CLIMB = 60; Â  Â  Â  Â  Â  Â  while (fiber && depth < MAX_CLIMB) {Â  Â  Â  Â  Â  Â  Â  Â  if (visitedFibers.has(fiber)) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fiber = fiber.return;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  depth++;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  continue;Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  visitedFibers.add(fiber);Â  Â  Â  Â  Â  Â  Â  Â  const sources = [Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fiber.memoizedProps?.value,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fiber.memoizedProps,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fiber.memoizedStateÂ  Â  Â  Â  Â  Â  Â  Â  ];Â  Â  Â  Â  Â  Â  Â  Â  for (const data of sources) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!data || typeof data !== 'object') continue;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Object.keys(data).forEach(key => {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const val = data[key];Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (this.isValidTokenList(val)) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const type = this.identifyType(val);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (type === '${CAPTURE_CONFIG.targetCategory}' && !this.fiberCache) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.fiberCache = fiber; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const time = type === 'migrated' Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ? parseInt(val[0].migrateTime || 0)Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  : parseInt(val[0].createTime || val[0].startTime || 0);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  foundLists.push({Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  source: 'scan',Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: type,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  count: val.length,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  time: time,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  keyName: key,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: valÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  fiber = fiber.return;Â  Â  Â  Â  Â  Â  Â  Â  depth++;Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  }Â  Â  Â  Â  return foundLists;Â  Â  }};Â  })();`;function safeFloat(val: any): number {if (val === 'null' || val === null || val === undefined) return 0;const num = parseFloat(val);return isNaN(num) ? 0 : num;}function safeInt(val: any): number {if (val === 'null' || val === null || val === undefined) return 0;const num = parseInt(val, 10);return isNaN(num) ? 0 : num;}// âœ¨ æ›´æ–°å½’ä¸€åŒ–é€»è¾‘ï¼Œæ˜ å°„æ‰€æœ‰å…³é”®çš„æ–°å­—æ®µfunction normalizeData(rawItems: any[]): MemeItem[] {if (!Array.isArray(rawItems)) return []; code Codedownloadcontent_copyexpand_less Â  Â return rawItems.map(raw => {Â  Â  const isMigrated = String(raw.migrateStatus) === 'true';Â  Â  Â  Â  const migrateTime = safeInt(raw.migrateTime);Â  Â  const createTime = safeInt(raw.createTime);Â  Â  // å¦‚æœæ˜¯å·²è¿ç§»ï¼Œæ˜¾ç¤ºæ—¶é—´ä¼˜å…ˆä½¿ç”¨è¿ç§»æ—¶é—´ï¼Œå¦åˆ™ä½¿ç”¨åˆ›å»ºæ—¶é—´Â  Â  const displayTime = isMigrated && migrateTime > 0 ? migrateTime : createTime;Â  Â  return {Â  Â  Â  Â  chain: 'BSC',Â  Â  Â  Â  contractAddress: raw.contractAddress || '',Â  Â  Â  Â  symbol: raw.symbol || 'UNKNOWN',Â  Â  Â  Â  name: raw.name || raw.symbol,Â  Â  Â  Â  icon: raw.icon === 'null' ? undefined : raw.icon,Â  Â  Â  Â  Â  Â  Â  Â  progress: safeFloat(raw.progress),Â  Â  Â  Â  status: isMigrated ? 'dex' : 'trading',Â  Â  Â  Â  Â  Â  Â  Â  holders: safeInt(raw.holders),Â  Â  Â  Â  marketCap: safeFloat(raw.marketCap),Â  Â  Â  Â  liquidity: safeFloat(raw.liquidity),Â  Â  Â  Â  volume: safeFloat(raw.volume),Â  Â  Â  Â  Â  Â  Â  Â  twitter: raw.twitter === 'null' ? null : raw.twitter,Â  Â  Â  Â  telegram: raw.telegram === 'null' ? null : raw.telegram,Â  Â  Â  Â  website: raw.website === 'null' ? null : raw.website,Â  Â  Â  Â  Â  Â  Â  Â  // --- âœ¨ æ–°å¢é€ä¼ å­—æ®µ ---Â  Â  Â  Â  devMigrateCount: safeInt(raw.devMigrateCount),Â  Â  Â  Â  countBuy: safeInt(raw.countBuy),Â  Â  Â  Â  countSell: safeInt(raw.countSell),Â  Â  Â  Â  holdersSniperPercent: safeFloat(raw.holdersSniperPercent),Â  Â  Â  Â  paidOnDexScreener: String(raw.paidOnDexScreener) === 'true',Â  Â  Â  Â  migrateTime: migrateTime, // ä¿å­˜åŸå§‹è¿ç§»æ—¶é—´ç”¨äºè®¡ç®—é€Ÿåº¦Â  Â  Â  Â  Â  Â  Â  Â  // åŸºç¡€æ—¶é—´å­—æ®µÂ  Â  Â  Â  createTime: createTime,Â  Â  Â  Â  updateTime: Date.now(), // æœ¬åœ°æ›´æ–°æ—¶é—´Â  Â  Â  Â  source: 'meme-rush'Â  Â  };});Â  }// ==============================================================================// --- ğŸš€ ä¸»æµç¨‹ ---// ==============================================================================async function ensurePageReady(page: Page): Promise<boolean> {logger.log([Inject] æ³¨å…¥æ‰«æå¼•æ“..., logger.LOG_LEVELS.INFO);await page.evaluate(SCANNER_LOGIC_SCRIPT);return true;}async function setupMemePage(browser: Browser, socket: Socket): Promise<void> {const context = await browser.newContext({ viewport: null });const page = await context.newPage(); code Codedownloadcontent_copyexpand_less Â  Â page.on('console', msg => {Â  Â  const text = msg.text();Â  Â  if (text.includes('Content Security Policy') || text.includes('ERR_CONNECTION_CLOSED') || text.includes('Failed to load resource')) return;Â  Â  if (msg.type() === 'error' && !text.includes('TypeError')) console.log(`[Browser Err] ${text}`);});try {Â  Â  let attempts = 0;Â  Â  let success = false;Â  Â  while (attempts < CAPTURE_CONFIG.maxRetries && !success) {Â  Â  Â  Â  try {Â  Â  Â  Â  Â  Â  attempts++;Â  Â  Â  Â  Â  Â  logger.log(`[Navi] (å°è¯• ${attempts}/${CAPTURE_CONFIG.maxRetries}) å‰å¾€: ${TARGET_URL}`, logger.LOG_LEVELS.INFO);Â  Â  Â  Â  Â  Â  await page.goto(TARGET_URL, { waitUntil: 'commit', timeout: 45000 });Â  Â  Â  Â  Â  Â  success = true;Â  Â  Â  Â  Â  Â  logger.log(`[Navi] âœ… é¡µé¢åŠ è½½æˆåŠŸ`, logger.LOG_LEVELS.INFO);Â  Â  Â  Â  } catch (err: any) {Â  Â  Â  Â  Â  Â  logger.log(`[Navi] âš ï¸ è¿æ¥å¤±è´¥: ${err.message.split('\n')[0]}`, logger.LOG_LEVELS.INFO);Â  Â  Â  Â  Â  Â  if (attempts < CAPTURE_CONFIG.maxRetries) await new Promise(r => setTimeout(r, 3000));Â  Â  Â  Â  Â  Â  else throw new Error(`è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°`);Â  Â  Â  Â  }Â  Â  }Â  Â  await ensurePageReady(page);Â  Â  await handleGuidePopup(page);Â  Â  await checkAndClickCookieBanner(page);Â  Â  Â  Â  logger.log(`[Init] ğŸ–±ï¸ æ¿€æ´»å³ä¾§åŒºåŸŸ...`, logger.LOG_LEVELS.INFO);Â  Â  const viewport = await page.evaluate(() => ({ width: window.innerWidth, height: window.innerHeight }));Â  Â  await page.mouse.move(viewport.width / 2, viewport.height / 2);Â  Â  await page.waitForTimeout(500);Â  Â  await page.mouse.move(viewport.width * 0.8, viewport.height / 2);Â  Â  Â  Â  await page.evaluate(async () => {Â  Â  Â  Â  window.scrollTo(0, 500); await new Promise(r => setTimeout(r, 500));Â  Â  Â  Â  window.scrollTo(0, 0); Â  await new Promise(r => setTimeout(r, 500));Â  Â  });Â  Â  logger.log(`[Loop] ğŸš€ å¼€å§‹ç›‘å¬ [${CAPTURE_CONFIG.targetCategory}] (Strict Sort: migrateTime Desc)...`, logger.LOG_LEVELS.INFO);Â  Â  let lastTopSymbol = '';Â  Â  let loopCount = 0;Â  Â  let noDataCount = 0;Â  Â  setInterval(async () => {Â  Â  Â  Â  loopCount++;Â  Â  Â  Â  try {Â  Â  Â  Â  Â  Â  const scanResult: any = await page.evaluate(() => {Â  Â  Â  Â  Â  Â  Â  Â  // @ts-ignoreÂ  Â  Â  Â  Â  Â  Â  Â  if (!window.MemeScannerEngine) return null;Â  Â  Â  Â  Â  Â  Â  Â  // @ts-ignoreÂ  Â  Â  Â  Â  Â  Â  Â  return { lists: window.MemeScannerEngine.scan() };Â  Â  Â  Â  Â  Â  }).catch(async (e) => {Â  Â  Â  Â  Â  Â  Â  Â  if (e.message.includes('Execution context was destroyed')) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await page.evaluate(SCANNER_LOGIC_SCRIPT).catch(() => {});Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  return null;Â  Â  Â  Â  Â  Â  });Â  Â  Â  Â  Â  Â  if (scanResult && scanResult.lists && scanResult.lists.length > 0) {Â  Â  Â  Â  Â  Â  Â  Â  noDataCount = 0;Â  Â  Â  Â  Â  Â  Â  Â  const lists = scanResult.lists;Â  Â  Â  Â  Â  Â  Â  Â  const targetLists = lists.filter((l:any) => l.type === CAPTURE_CONFIG.targetCategory);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (targetLists.length > 0) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  targetLists.sort((a:any, b:any) => b.time - a.time);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bestList = targetLists[0];Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const topData = bestList.data;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (topData && topData.length > 0) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ğŸ”¥ å¼ºåˆ¶æ’åºï¼šæŒ‰ migrateTime å€’åºÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  topData.sort((a: any, b: any) => {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tA = parseInt(a.migrateTime || '0');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tB = parseInt(b.migrateTime || '0');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return tB - tA;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const firstRaw = topData[0];Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const currentSymbol = firstRaw.symbol;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const showTime = parseInt(firstRaw.migrateTime || firstRaw.createTime);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentSymbol !== lastTopSymbol) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('\n'); Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logger.log(Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `ğŸ”¥ [NEW MIGRATED] Symbol: ${currentSymbol} | Count: ${bestList.count} | MigratedTime: ${new Date(showTime).toLocaleTimeString()}`,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logger.LOG_LEVELS.INFOÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ğŸ”¥ è¯¦ç»†éªŒè¯ï¼šæ‰“å°å‰ä¸‰åçš„æ—¶é—´ï¼Œè¯æ˜æ˜¯æ’åºè¿‡çš„Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('--------------------------------------------------');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('âœ… [Verify Sorting] Top 3 Latest Migrated Tokens:');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  topData.slice(0, 5).forEach((item: any, idx: number) => {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const mt = parseInt(item.migrateTime || '0');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log(` Â  #${idx+1} ${item.symbol.padEnd(8)} | Time: ${new Date(mt).toLocaleTimeString()} (${mt})`);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('--------------------------------------------------');Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lastTopSymbol = currentSymbol;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (loopCount % 5 === 0) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  process.stdout.write(`\r[Scan #${loopCount}] Migrated: ${topData.length} items [Top: ${currentSymbol}] Â  Â  Â `);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const items = normalizeData(topData.slice(0, 40));Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  socket.emit('data-update', { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  category: `meme_${CAPTURE_CONFIG.targetCategory}`, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'full', Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: items Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â  } else {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (loopCount % 5 === 0) process.stdout.write(`\r[Scan #${loopCount}] â³ No migrated lists yet...`);Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  } else {Â  Â  Â  Â  Â  Â  Â  Â  noDataCount++;Â  Â  Â  Â  Â  Â  Â  Â  if (loopCount % 5 === 0) process.stdout.write(`\r[Scan #${loopCount}] â³ æš‚æ— æ•°æ®...`);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (noDataCount > 30) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  logger.log(`\n[Auto-Fix] æ•°æ®æµä¸­æ–­ï¼Œåˆ·æ–°é¡µé¢...`, logger.LOG_LEVELS.INFO);Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  noDataCount = 0;Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await page.reload({ waitUntil: 'commit' });Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await ensurePageReady(page);Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  } catch (err: any) {Â  Â  Â  Â  Â  Â  if (!err.message.includes('Context was destroyed')) {Â  Â  Â  Â  Â  Â  Â  Â  logger.log(`\nâŒ Loop Error: ${err.message}`, logger.LOG_LEVELS.ERROR);Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  }Â  Â  }, CAPTURE_CONFIG.interval);Â  Â  await new Promise(() => {});} catch (error: any) {Â  Â  logger.log(`âŒ Setup Error: ${error.message}`, logger.LOG_LEVELS.ERROR);}Â  }async function main() {logger.init();const socket: Socket = io(SERVER_URL);let browser: Browser | undefined; code Codedownloadcontent_copyexpand_less Â  Â try {Â  Â  browser = await chromium.launch({Â  Â  Â  Â  executablePath: MY_CHROME_PATH,Â  Â  Â  Â  headless: false,Â  Â  Â  Â  args: [Â  Â  Â  Â  Â  Â  '--start-maximized',Â  Â  Â  Â  Â  Â  '--no-sandbox',Â  Â  Â  Â  Â  Â  '--disable-blink-features=AutomationControlled',Â  Â  Â  Â  Â  Â  `--proxy-server=${CAPTURE_CONFIG.proxy}`,Â  Â  Â  Â  Â  Â  '--ignore-certificate-errors'Â  Â  Â  Â  ],Â  Â  });Â  Â  await setupMemePage(browser, socket);} catch (e: any) {Â  Â  logger.log(`âŒ Main Error: ${e.stack}`, logger.LOG_LEVELS.ERROR);}Â  }main();]]></file>2. æ›´æ–° Types å®šä¹‰åœ¨ frontend/src/types.ts ä¸­æ·»åŠ è¿™äº›æ–°å­—æ®µã€‚<file path="packages/frontend/src/types.ts"><![CDATA[// packages/frontend/src/types.ts// --- K-Line Related Types ---export interface LightweightChartKline {time: number;open: number;high: number;low: number;close: number;volume: number;}export interface KlineData {primaryKey: string;address: string;chain: string;interval: string;timestamp: number;time: number;open: number;high: number;low: number;close: number;volume: number;}export interface KlineUpdatePayload {room: string;data: LightweightChartKline;}export interface KlineFetchErrorPayload {key: string;error: string;}// --- Meme / Market Data Types ---// âœ¨ MemeItem æ¥å£æ‰©å±•export interface MemeItem {chain: string;contractAddress: string;symbol: string;icon?: string; code Codedownloadcontent_copyexpand_less Â  Â name: string;progress: number;holders: number;devMigrateCount?: number;// æ—¶é—´ç›¸å…³createTime: number; migrateTime?: number; // âœ¨ æ–°å¢ï¼šè¿ç§»æ—¶é—´status?: string; Â  Â  Â updateTime?: number; Â twitter?: string;telegram?: string;website?: string;twitterId?: string; Â  liquidity?: number;marketCap?: number;volume?: number;// âœ¨ æ–°å¢çƒ­åº¦/é£é™©å­—æ®µcountBuy?: number; Â  Â  Â  Â  Â  Â // ä¹°å•æ•°countSell?: number; Â  Â  Â  Â  Â  // å–å•æ•°holdersSniperPercent?: number; // ç‹™å‡»æ‰‹å æ¯”paidOnDexScreener?: boolean; Â  // æ˜¯å¦ä»˜è´¹ DexScreenernarrative?: string; Â  source?: string;Â  }export type DataAction = 'snapshot' | 'update';export type LocalDataPayload<T> = {category: string;type: DataAction;data: T[];};]]></file>3. æ›´æ–°å‰ç«¯å¡ç‰‡ç»„ä»¶ (MemePage)è¿™æ˜¯é‡å¤´æˆã€‚æˆ‘ä¼šåœ¨ MemeCard ä¸­æ·»åŠ ä»¥ä¸‹è§†è§‰å…ƒç´ ï¼šSpeed Badge: æ˜¾ç¤ºä»åˆ›å»ºåˆ°å‘å°„çš„è€—æ—¶ã€‚< 30min: çº¢è‰²ç«ç„° ğŸ”¥ (æé€Ÿ)< 2h: æ©™è‰² âš¡> 2h: ç°è‰² ğŸ¢Risk Badge: holdersSniperPercent > 50% æ˜¾ç¤ºçº¢è‰²è­¦å‘Šã€‚Marketing Badge: paidOnDexScreener ä¸º true æ—¶æ˜¾ç¤ºé‡‘è‰² ADS æ ‡ã€‚Buy/Sell Ratio: æ˜¾ç¤ºå…·ä½“çš„ä¹°å–å•æ•°ã€‚<file path="packages/frontend/src/MemePage.tsx"><![CDATA[// packages/frontend/src/MemePage.tsximport { Component, createMemo, For, Show, onMount, createSignal } from 'solid-js';import { useMarketData } from './hooks/useMarketData';import type { MemeItem } from './types';const BACKEND_URL = 'http://localhost:3001';declare global {interface Window {twttr: any;}}interface MemeCardProps {item: MemeItem;}interface ColumnProps {title: string;items: MemeItem[];count: number;}// ID æå–const extractTweetId = (input: string | undefined | null): string | null => {if (!input) return null;const str = String(input).trim();if (/^\d+$/.test(str)) return str;const match = str.match(/status/(\d+)/);if (match && match[1]) return match[1];return null;};// è¾…åŠ©ï¼šæ—¶é—´æ ¼å¼åŒ–const formatTime = (ts: number | undefined) => {if (!ts) return '';return new Date(ts).toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });};// âœ¨ æ ¸å¿ƒé€»è¾‘ï¼šè®¡ç®—â€œå‘å°„é€Ÿåº¦â€const getBondingDuration = (item: MemeItem): { text: string; color: string; icon: string } | null => {if (!item.migrateTime || !item.createTime || item.migrateTime <= 0) return null; code Codedownloadcontent_copyexpand_less Â  Â const diffMs = item.migrateTime - item.createTime;const diffMins = Math.floor(diffMs / (1000 * 60));const diffHours = Math.floor(diffMins / 60);// æé€Ÿé‡‘ç‹—ï¼šå°äº 30 åˆ†é’Ÿif (diffMins < 30) {Â  Â  return { text: `${diffMins}m`, color: '#dc3545', icon: 'ğŸ”¥' }; // Red Fire}// å¿«é€Ÿï¼šå°äº 2 å°æ—¶if (diffHours < 2) {Â  Â  return { text: `${diffMins}m`, color: '#fd7e14', icon: 'âš¡' }; // Orange Bolt}// æ™®é€šif (diffHours < 24) {Â  Â  return { text: `${diffHours}h`, color: '#6c757d', icon: 'â±' }; // Gray}return { text: '>1d', color: '#6c757d', icon: 'ğŸ¢' };Â  };// --- æ¨ç‰¹ç»„ä»¶ (ä¿æŒä¸å˜) ---const TweetEmbed: Component<{ tweetId: string; }> = (props) => {let containerRef: HTMLDivElement | undefined;const [isLoaded, setIsLoaded] = createSignal(false); code Codedownloadcontent_copyexpand_less Â  Â onMount(() => {Â  Â  if (!props.tweetId) return;Â  Â  if (!window.twttr) {Â  Â  Â  Â  const script = document.createElement('script');Â  Â  Â  Â  script.src = 'https://platform.twitter.com/widgets.js';Â  Â  Â  Â  script.async = true;Â  Â  Â  Â  document.head.appendChild(script);Â  Â  }Â  Â  const renderTweet = () => {Â  Â  Â  Â  if (window.twttr && window.twttr.widgets && containerRef) {Â  Â  Â  Â  Â  Â  containerRef.innerHTML = '';Â  Â  Â  Â  Â  Â  window.twttr.widgets.createTweet(props.tweetId, containerRef, {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  theme: 'light', lang: 'zh-cn', dnt: true, conversation: 'none', cards: 'visible', width: 'auto', align: 'center'Â  Â  Â  Â  Â  Â  }).then((el: any) => { if (el) setIsLoaded(true); else containerRef!.innerHTML = `<div style="color:#ccc; font-size:11px; padding:10px; text-align:center;">Tweet unavailable</div>`; });Â  Â  Â  Â  } else { setTimeout(renderTweet, 200); }Â  Â  };Â  Â  renderTweet();});return (Â  Â  <div class="tweet-embed-wrapper" style={{ "min-height": isLoaded() ? "auto" : "150px", "width": "100%", "background": isLoaded() ? "transparent" : "#f8f9fa", "border-radius": "8px", "display": "flex", "justify-content": "center", "align-items": "center", "margin-top": "8px", "border": isLoaded() ? "none" : "1px dashed #e1e4e8" }}>Â  Â  Â  Â  <div ref={containerRef} style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>Â  Â  Â  Â  Â  Â  <span style={{ color: '#aaa', fontSize: '11px' }}>Loading Tweet...</span>Â  Â  Â  Â  </div>Â  Â  </div>);Â  };// --- å¡ç‰‡ç»„ä»¶ ---const MemeCard: Component<MemeCardProps> = (props) => {const { item } = props;const cleanTwitterId = createMemo(() => extractTweetId(item.twitterId || item.twitter));const iconUrl = item.icon ? ${BACKEND_URL}/image-proxy?url=${encodeURIComponent(item.icon)} : '';const speed = createMemo(() => getBondingDuration(item)); code Codedownloadcontent_copyexpand_less Â  Â const handleCardClick = () => {Â  Â  window.open(`/token.html?address=${item.contractAddress}&chain=${item.chain}`, '_blank');};const handleContentClick = (e: MouseEvent) => e.stopPropagation();const formattedCap = () => {Â  Â  if (!item.marketCap) return '-';Â  Â  if (item.marketCap >= 1000000) return (item.marketCap / 1000000).toFixed(1) + 'M';Â  Â  if (item.marketCap >= 1000) return (item.marketCap / 1000).toFixed(1) + 'K';Â  Â  return item.marketCap.toString();};return (Â  Â  <div class="meme-card" onClick={handleCardClick}>Â  Â  Â  Â  {/* Header */}Â  Â  Â  Â  <div class="card-header-layout">Â  Â  Â  Â  Â  Â  <Show when={item.icon} fallback={<div style={{ width: '42px', height: '42px', background: '#eee', borderRadius: '50%' }}></div>}>Â  Â  Â  Â  Â  Â  Â  Â  <img src={iconUrl} class="card-icon" loading="lazy" onError={(e) => e.currentTarget.style.display = 'none'} />Â  Â  Â  Â  Â  Â  </Show>Â  Â  Â  Â  Â  Â  <div class="card-info-col">Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row-top">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style={{display:'flex', alignItems:'center', gap: '6px', maxWidth: '180px'}}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="card-symbol" title={item.symbol}>{item.symbol}</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {/* âœ¨ 1. ä»˜è´¹æ¨å¹¿é‡‘æ ‡ */}Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Show when={item.paidOnDexScreener}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span title="Paid on DexScreener" style={{ fontSize: '0.6em', background: '#ffd700', color: '#856404', padding: '1px 3px', borderRadius: '3px', border: '1px solid #ffeeba', fontWeight: 'bold' }}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ADÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Show>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {/* âœ¨ 2. å‘å°„é€Ÿåº¦å¾½ç«  */}Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Show when={speed()}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style={{ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fontSize: '0.7em', Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: speed()!.color, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fontWeight: 'bold', Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: 'flex', Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alignItems: 'center',Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  background: `${speed()!.color}15`, // 10% opacity bgÂ  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  padding: '1px 5px',Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderRadius: '4px'Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {speed()!.icon} {speed()!.text}Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Show>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="card-time">{formatTime(item.migrateTime || item.createTime || Date.now())}</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row-bottom">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="stat-badge badge-cap">${formattedCap()}</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {/* âœ¨ 3. ä¹°å–åŠ›åº¦ */}Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Show when={item.countBuy !== undefined && item.countSell !== undefined}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="stat-badge" title={`Buys: ${item.countBuy} / Sells: ${item.countSell}`}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style={{color: '#28a745'}}>{item.countBuy}</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style={{opacity: 0.3, margin: '0 2px'}}>/</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style={{color: '#dc3545'}}>{item.countSell}</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Show>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="stat-badge">ğŸ‘¥ {item.holders || '-'}</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {/* âœ¨ 4. ç‹™å‡»æ‰‹è­¦å‘Š */}Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Show when={(item.holdersSniperPercent || 0) > 50}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="stat-badge" style={{ background: '#fff5f5', color: '#e03131', borderColor: '#ffc9c9' }} title={`Sniper Holdings: ${item.holdersSniperPercent}%`}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ¯ {Math.round(item.holdersSniperPercent!)}%Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Show>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <Show when={(item.devMigrateCount || 0) > 0}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="stat-badge badge-dev">Dev:{item.devMigrateCount}</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </Show>Â  Â  Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  </div>Â  Â  Â  Â  {/* Narrative */}Â  Â  Â  Â  <Show when={item.narrative}>Â  Â  Â  Â  Â  Â  <div class="card-narrative-box" onClick={handleContentClick}>Â  Â  Â  Â  Â  Â  Â  Â  {item.narrative}Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  </Show>Â  Â  Â  Â  {/* Tweet */}Â  Â  Â  Â  <Show when={cleanTwitterId()}>Â  Â  Â  Â  Â  Â  <div onClick={handleContentClick} style={{ width: '100%', overflow: 'hidden' }}>Â  Â  Â  Â  Â  Â  Â  Â  <TweetEmbed tweetId={cleanTwitterId()!} />Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  </Show>Â  Â  Â  Â  {/* Bonding Curve */}Â  Â  Â  Â  <div class="card-bonding-line" title={`Bonding Curve: ${item.progress?.toFixed(1)}%`}>Â  Â  Â  Â  Â  Â  <divÂ  Â  Â  Â  Â  Â  Â  Â  class="bonding-fill"Â  Â  Â  Â  Â  Â  Â  Â  style={{Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  width: `${Math.min(item.progress || 0, 100)}%`,Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  "background-color": (item.progress || 0) > 90 ? '#28a745' : '#007bff'Â  Â  Â  Â  Â  Â  Â  Â  }}Â  Â  Â  Â  Â  Â  ></div>Â  Â  Â  Â  </div>Â  Â  </div>);Â  };// --- Column ---const MemeColumn: Component<ColumnProps> = (props) => {return (<div class="meme-column"><div class="column-header"><span>{props.title}</span><span class="column-badge" style={{ background: '#dce4ea', padding: '2px 8px', borderRadius: '10px', fontSize: '0.85em' }}>{props.count}</span></div><div class="column-content"><For each={props.items}>{(item) => <MemeCard item={item} />}</For><Show when={props.items.length === 0}><div style={{ textAlign: 'center', padding: '50px 0', color: '#999', fontSize: '0.9em', gridColumn: '1 / -1' }}>Waiting for data...</div></Show></div></div>);};// --- Page ---const MemePage: Component = () => {const {marketData: migratedMemeData,connectionStatus: migratedStatus,lastUpdate} = useMarketData<MemeItem>('meme_migrated'); code Codedownloadcontent_copyexpand_less Â  Â const migratedTokens = createMemo(() => {Â  Â  // âœ¨ æŒ‰è¿ç§»æ—¶é—´å€’åºï¼Œæœ€æ–°çš„åœ¨ä¸Šé¢Â  Â  const sorted = migratedMemeDataÂ  Â  Â  Â  .slice()Â  Â  Â  Â  .sort((a, b) => (b.migrateTime || 0) - (a.migrateTime || 0));Â  Â  if (sorted.length > 0) {Â  Â  Â  Â  console.log(`[MemePage] ğŸ¦‹ Top Token: ${sorted[0].symbol}, Migrated At: ${new Date(sorted[0].migrateTime!).toLocaleTimeString()}`);Â  Â  }Â  Â  return sorted;});onMount(() => console.log('[MemePage] ğŸš€ Migrated-Only Layout Mounted.'));return (Â  Â  <div class="meme-board-container">Â  Â  Â  Â  <header class="meme-header">Â  Â  Â  Â  Â  Â  <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>Â  Â  Â  Â  Â  Â  Â  Â  <h1>ğŸ¶ Meme Rush <span style={{ fontSize: '0.6em', color: '#999', fontWeight: 'normal' }}>KANBAN</span></h1>Â  Â  Â  Â  Â  Â  Â  Â  <nav class="nav-links" style={{ display: 'flex', gap: '10px' }}>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/" class="nav-btn" style={{ textDecoration: 'none', color: '#666', fontSize: '0.9rem' }}>ğŸ”¥ Hotlist</a>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="nav-btn active" style={{ fontWeight: 'bold', color: '#007bff', background: '#e7f1ff', padding: '4px 10px', borderRadius: '4px', fontSize: '0.9rem' }}>å·²å‘å°„çœ‹æ¿</span>Â  Â  Â  Â  Â  Â  Â  Â  </nav>Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  Â  Â  <div style={{ display: 'flex', gap: '15px', alignItems: 'center', fontSize: '0.85em', color: '#666' }}>Â  Â  Â  Â  Â  Â  Â  Â  <div>â± {lastUpdate()}</div>Â  Â  Â  Â  Â  Â  Â  Â  <div class="status-indicator" title="Migrated Tokens Feed">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style={{Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: 'inline-block', width: '8px', height: '8px', borderRadius: '50%',Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  background: migratedStatus().includes('Connected') ? '#28a745' : '#dc3545',Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  marginRight: '4px'Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }}></span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {migratedStatus()}Â  Â  Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  Â  Â  </div>Â  Â  Â  Â  </header>Â  Â  Â  Â  <div class="meme-board-grid">Â  Â  Â  Â  Â  Â  <MemeColumn title="ğŸ¦‹ å·²å‘å°„/é‡‘ç‹— (Migrated)" items={migratedTokens()} count={migratedTokens().length} />Â  Â  Â  Â  </div>Â  Â  </div>);Â  };export default MemePage;]]></file>





çˆ¬è™«ç«¯å·²ç»ä¼ é€’äº†meme å·²è¿ç§»æ‰€æœ‰çš„å­—æ®µ,ä¸€æ­¥åˆ°ä½ï¼Œä¼ è¾“å…¨éƒ¨å­—æ®µï¼Œï¼Œä½ è§‰å¾—å‰ç«¯æœ‰å“ªäº›å­—æ®µå¯ä»¥ç”¨èµ·æ¥ï¼Œç”¨äºæ›´å¥½çš„æ•æ‰çƒ­ç‚¹ï¼Œæˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•ï¼ŒmigrateTime-createTimeï¼Œä¹Ÿå°±æ˜¯ä»å‘å¸åˆ°è¿ç§»èŠ±çš„æ—¶é—´è¶ŠçŸ­ï¼Œè¿™ä¸ªå¸å°±è¶Šçƒ­
firstSeen: '1764648938751'
chainId: '56'
contractAddress: '0xd4e0e063e1e7b90afec8668f6b8785066db94444'
symbol: '2026'
name: '2026'
icon: 'https://static.four.meme/market/6bea4c8c-4d91-416c...'
caIcon: 'null'
iconStatus: '1'
caIconStatus: '1'
createTime: '1764590830000'
height: '70119104'
twitter: 'null'
website: 'null'
telegram: 'null'
progress: '91.37'
protocol: '2001'
holders: '174'
liquidity: '21791.49'
volume: '12525.71'
marketCap: '46675.4'
count: '363'
countBuy: '319'
countSell: '44'
holdersTop10Percent: '45'
holdersDevPercent: 'null'
holdersSniperPercent: '72'
holdersInsiderPercent: 'null'
devSellPercent: 'null'
migrateStatus: 'false'
migrateTime: '0'
paidOnDexScreener: 'false'
devMigrateCount: '1'
decimal: '18'
sensitiveToken: 'false'
exclusive: 'false'
meme-extractor.tså·²ç»å°†æ‰€æœ‰å­—æ®µä¼ é€’åˆ°ruståç«¯äº†å•Šï¼Œåç«¯è½¬å‘æ‰€æœ‰çš„å­—æ®µ
ä»¥ä¸‹æ˜¯å…¶ä»–çš„AIçš„ä¿®æ”¹æ„è§ï¼Œä¾›ä½ å‚è€ƒ
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„åˆ‡å…¥ç‚¹ï¼â€œä»å‘å¸åˆ°è¿ç§»ï¼ˆå‘å°„ï¼‰çš„æ—¶é—´è¶ŠçŸ­ï¼Œçƒ­åº¦è¶Šé«˜â€ è¿™ä¸ªé€»è¾‘åœ¨ Meme äº¤æ˜“ä¸­æ˜¯éå¸¸æ ¸å¿ƒçš„â€œé‡‘ç‹—â€æŒ‡æ ‡ï¼ˆTime to Bondï¼‰ã€‚è¿™ä»£è¡¨äº†ç¤¾åŒºçš„ FOMOï¼ˆé”™å¤±ææƒ§ï¼‰ç¨‹åº¦å’Œèµ„é‡‘æ¶Œå…¥çš„é€Ÿåº¦ã€‚é™¤äº†ä½ æåˆ°çš„ migrateTime - createTimeï¼Œæ ¹æ®ä½ æä¾›çš„å­—æ®µï¼Œæˆ‘è¿˜å¼ºçƒˆå»ºè®®åˆ©ç”¨ä»¥ä¸‹å­—æ®µæ¥æ•æ‰çƒ­ç‚¹å’Œè§„é¿é£é™©ï¼špaidOnDexScreener (æ˜¯å¦ä»˜è´¹æ¨å¹¿):ç”¨é€”: è¿™æ˜¯ä¸€ä¸ªæå¼ºçš„çœ‹æ¶¨ä¿¡å·ã€‚å¦‚æœ Dev æˆ–ç¤¾åŒºæ„¿æ„èŠ±é’±åœ¨ DexScreener ä¸Šåšå¹¿å‘Šæˆ–æ›´æ–°ä¿¡æ¯ï¼Œè¯´æ˜ä»–ä»¬æœ‰è¥é”€é¢„ç®—ä¸”æƒ³æŠŠç›˜å­åšå¤§ï¼Œè€Œä¸æ˜¯ç®€å•çš„â€œä¸€æ³¢æµâ€ Rugã€‚å±•ç¤º: æ˜¾ç¤ºä¸€ä¸ª "AD" æˆ– "Paid" çš„é‡‘æ ‡ã€‚holdersSniperPercent (ç‹™å‡»æ‰‹æŒä»“å æ¯”):ç”¨é€”: è¿™æ˜¯ä¸€ä¸ªé£é™©æŒ‡æ ‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡é«˜ï¼ˆæ¯”å¦‚ > 60%ï¼‰ï¼Œè¯´æ˜å¤§é‡ç­¹ç é›†ä¸­åœ¨ç‹™å‡»æœºå™¨äººæ‰‹ä¸­ï¼Œå¼€ç›˜ç ¸ç›˜é£é™©æé«˜ã€‚å±•ç¤º: å¦‚æœ > 50%ï¼Œæ˜¾ç¤ºçº¢è‰²è­¦å‘Š "ğŸ¯ Sniper: 72%"ã€‚countBuy vs countSell (ä¹°å–å•æ•°):ç”¨é€”: æƒ…ç»ªæŒ‡æ ‡ã€‚æ¯”å•çº¯çš„ Volume æ›´èƒ½åæ˜ æ•£æˆ·å‚ä¸åº¦ã€‚å¦‚æœä¹°å•æ•°è¿œå¤§äºå–å•æ•°ï¼ˆä¾‹å¦‚ 10:1ï¼‰ï¼Œè¯´æ˜æƒ…ç»ªé«˜æ¶¨ã€‚å±•ç¤º: æ˜¾ç¤ºä¸€ä¸ªä¹°å–åŠ›åº¦çš„æ¯”ä¾‹æ¡æˆ–æ•°å€¼ï¼ˆå¦‚ "319 ğŸŸ¢ / 44 ğŸ”´"ï¼‰ã€‚devMigrateCount (Dev å‘å°„æ¬¡æ•°):ç”¨é€”: Dev è¡Œä¸ºç”»åƒã€‚å¦‚æœè¿™ä¸ªæ•°æ˜¯ 1ï¼Œå¯èƒ½æ˜¯æ–°å·ï¼›å¦‚æœå¾ˆå¤§ï¼Œè¦ç»“åˆè¿‡å¾€æ¥çœ‹ã€‚å±•ç¤º: å·²ç»åœ¨ç°æœ‰ä»£ç ä¸­ï¼Œå¯ä»¥å¼ºåŒ–æ˜¾ç¤ºã€‚ä¸‹é¢æˆ‘å°†åˆ†ä¸‰æ­¥æ¥å®ç°è¿™äº›åŠŸèƒ½ï¼šExtractor: æ›´æ–°æ•°æ®æ¸…æ´—é€»è¾‘ï¼Œé€ä¼ è¿™äº›æ–°å­—æ®µã€‚Frontend Types: æ›´æ–°ç±»å‹å®šä¹‰ã€‚Frontend Page: æ›´æ–°å¡ç‰‡ UIï¼Œå¢åŠ â€œæé€Ÿå‘å°„æ—¶é—´â€ã€â€œç‹™å‡»æ‰‹è­¦å‘Šâ€ã€â€œä»˜è´¹æ¨å¹¿é‡‘æ ‡â€ç­‰è§†è§‰å…ƒç´ ã€‚1. æ›´æ–°æ•°æ®æå–å™¨ (Extractor)æˆ‘ä»¬éœ€è¦åœ¨ normalizeData ä¸­æŠŠè¿™äº›æœ‰ä»·å€¼çš„åŸå§‹å­—æ®µæå–å‡ºæ¥ã€‚<file path="packages/extractor/src/meme-extractor.ts"><![CDATA[// packages/extractor/src/meme-extractor.tsimport { chromium } from 'playwright-extra';import type { Browser, Page } from 'playwright';import stealth from 'puppeteer-extra-plugin-stealth';import { handleGuidePopup, checkAndClickCookieBanner } from './pageInitializer';import * as logger from './logger';import { io, Socket } from 'socket.io-client';import type { MemeItem } from 'shared-types';chromium.use(stealth());// ==============================================================================// --- âš™ï¸ é…ç½®åŒºåŸŸ ---// ==============================================================================const SERVER_URL = 'http://localhost:3001';const MY_CHROME_PATH = 'F:\Program Files\Google\Chrome\Application\chrome.exe';const TARGET_URL = 'https://web3.binance.com/zh-CN/meme-rush?chain=bsc';const CAPTURE_CONFIG = {// ğŸ¯ ç›®æ ‡: 'migrated'targetCategory: 'migrated' as 'new' | 'migrated',interval: 1000,proxy: 'socks5://127.0.0.1:1080',maxRetries: 5};// ==============================================================================// --- ğŸ§  æ ¸å¿ƒæ‰«æè„šæœ¬ ---// ==============================================================================const SCANNER_LOGIC_SCRIPT = `(() => {window.MemeScannerEngine = {fiberCache: null, code Codedownloadcontent_copyexpand_less    getReactFiber(el) {
        const key = Object.keys(el).find(k => k.startsWith('__reactFiber$'));
        return key ? el[key] : null;
    },

    isValidTokenList(list) {
        if (!Array.isArray(list) || list.length < 2) return false;
        const first = list[0];
        if (!first || typeof first !== 'object') return false;
        return !!first.symbol;
    },

    identifyType(list) {
        const first = list[0];
        const mStatus = String(first.migrateStatus);
        const progress = parseFloat(first.progress || '0');
        if (mStatus === 'true' || progress >= 99) return 'migrated';
        return 'new';
    },

    scan() {
        // 1. ç¼“å­˜ç­–ç•¥
        if (this.fiberCache) {
            try {
                const data = this.fiberCache.memoizedProps?.value || this.fiberCache.memoizedProps;
                let list = null;
                if (data) {
                    if (Array.isArray(data.allTokens)) list = data.allTokens;
                    else if (Array.isArray(data.currentTokens)) list = data.currentTokens;
                    else if (Array.isArray(data)) list = data;
                    else {
                         Object.values(data).forEach(v => {
                            if (this.isValidTokenList(v)) list = v;
                         });
                    }
                }

                if (list && this.isValidTokenList(list)) {
                    const type = this.identifyType(list);
                    if (type === '${CAPTURE_CONFIG.targetCategory}') {
                        // ä¼˜å…ˆå– migrateTime
                        const time = type === 'migrated' 
                            ? parseInt(list[0].migrateTime || 0)
                            : parseInt(list[0].createTime || list[0].startTime || 0);

                        return [{
                            source: 'cache',
                            type: type,
                            count: list.length,
                            time: time,
                            data: list
                        }];
                    }
                }
            } catch(e) {}
            this.fiberCache = null; 
        }

        // 2. æ·±åº¦æ‰«æ (MAX_CLIMB = 60)
        const allElements = document.querySelectorAll('div, span, section, main, ul, li, a, img, h2, h3');
        const visitedFibers = new WeakSet();
        const foundLists = [];

        for (const el of allElements) {
            let fiber = this.getReactFiber(el);
            let depth = 0;
            const MAX_CLIMB = 60; 

            while (fiber && depth < MAX_CLIMB) {
                if (visitedFibers.has(fiber)) {
                    fiber = fiber.return;
                    depth++;
                    continue;
                }
                visitedFibers.add(fiber);

                const sources = [
                    fiber.memoizedProps?.value,
                    fiber.memoizedProps,
                    fiber.memoizedState
                ];

                for (const data of sources) {
                    if (!data || typeof data !== 'object') continue;

                    Object.keys(data).forEach(key => {
                        const val = data[key];
                        if (this.isValidTokenList(val)) {
                            const type = this.identifyType(val);
                            
                            if (type === '${CAPTURE_CONFIG.targetCategory}' && !this.fiberCache) {
                                this.fiberCache = fiber; 
                            }

                            const time = type === 'migrated' 
                                ? parseInt(val[0].migrateTime || 0)
                                : parseInt(val[0].createTime || val[0].startTime || 0);

                            foundLists.push({
                                source: 'scan',
                                type: type,
                                count: val.length,
                                time: time,
                                keyName: key,
                                data: val
                            });
                        }
                    });
                }
                fiber = fiber.return;
                depth++;
            }
        }
        return foundLists;
    }
};
  })();`;function safeFloat(val: any): number {if (val === 'null' || val === null || val === undefined) return 0;const num = parseFloat(val);return isNaN(num) ? 0 : num;}function safeInt(val: any): number {if (val === 'null' || val === null || val === undefined) return 0;const num = parseInt(val, 10);return isNaN(num) ? 0 : num;}// âœ¨ æ›´æ–°å½’ä¸€åŒ–é€»è¾‘ï¼Œæ˜ å°„æ‰€æœ‰å…³é”®çš„æ–°å­—æ®µfunction normalizeData(rawItems: any[]): MemeItem[] {if (!Array.isArray(rawItems)) return []; code Codedownloadcontent_copyexpand_less    return rawItems.map(raw => {
    const isMigrated = String(raw.migrateStatus) === 'true';
    
    const migrateTime = safeInt(raw.migrateTime);
    const createTime = safeInt(raw.createTime);

    // å¦‚æœæ˜¯å·²è¿ç§»ï¼Œæ˜¾ç¤ºæ—¶é—´ä¼˜å…ˆä½¿ç”¨è¿ç§»æ—¶é—´ï¼Œå¦åˆ™ä½¿ç”¨åˆ›å»ºæ—¶é—´
    const displayTime = isMigrated && migrateTime > 0 ? migrateTime : createTime;

    return {
        chain: 'BSC',
        contractAddress: raw.contractAddress || '',
        symbol: raw.symbol || 'UNKNOWN',
        name: raw.name || raw.symbol,
        icon: raw.icon === 'null' ? undefined : raw.icon,
        
        progress: safeFloat(raw.progress),
        status: isMigrated ? 'dex' : 'trading',
        
        holders: safeInt(raw.holders),
        marketCap: safeFloat(raw.marketCap),
        liquidity: safeFloat(raw.liquidity),
        volume: safeFloat(raw.volume),
        
        twitter: raw.twitter === 'null' ? null : raw.twitter,
        telegram: raw.telegram === 'null' ? null : raw.telegram,
        website: raw.website === 'null' ? null : raw.website,
        
        // --- âœ¨ æ–°å¢é€ä¼ å­—æ®µ ---
        devMigrateCount: safeInt(raw.devMigrateCount),
        countBuy: safeInt(raw.countBuy),
        countSell: safeInt(raw.countSell),
        holdersSniperPercent: safeFloat(raw.holdersSniperPercent),
        paidOnDexScreener: String(raw.paidOnDexScreener) === 'true',
        migrateTime: migrateTime, // ä¿å­˜åŸå§‹è¿ç§»æ—¶é—´ç”¨äºè®¡ç®—é€Ÿåº¦
        
        // åŸºç¡€æ—¶é—´å­—æ®µ
        createTime: createTime,
        updateTime: Date.now(), // æœ¬åœ°æ›´æ–°æ—¶é—´
        source: 'meme-rush'
    };
});
  }// ==============================================================================// --- ğŸš€ ä¸»æµç¨‹ ---// ==============================================================================async function ensurePageReady(page: Page): Promise<boolean> {logger.log([Inject] æ³¨å…¥æ‰«æå¼•æ“..., logger.LOG_LEVELS.INFO);await page.evaluate(SCANNER_LOGIC_SCRIPT);return true;}async function setupMemePage(browser: Browser, socket: Socket): Promise<void> {const context = await browser.newContext({ viewport: null });const page = await context.newPage(); code Codedownloadcontent_copyexpand_less    page.on('console', msg => {
    const text = msg.text();
    if (text.includes('Content Security Policy') || text.includes('ERR_CONNECTION_CLOSED') || text.includes('Failed to load resource')) return;
    if (msg.type() === 'error' && !text.includes('TypeError')) console.log(`[Browser Err] ${text}`);
});

try {
    let attempts = 0;
    let success = false;
    while (attempts < CAPTURE_CONFIG.maxRetries && !success) {
        try {
            attempts++;
            logger.log(`[Navi] (å°è¯• ${attempts}/${CAPTURE_CONFIG.maxRetries}) å‰å¾€: ${TARGET_URL}`, logger.LOG_LEVELS.INFO);
            await page.goto(TARGET_URL, { waitUntil: 'commit', timeout: 45000 });
            success = true;
            logger.log(`[Navi] âœ… é¡µé¢åŠ è½½æˆåŠŸ`, logger.LOG_LEVELS.INFO);
        } catch (err: any) {
            logger.log(`[Navi] âš ï¸ è¿æ¥å¤±è´¥: ${err.message.split('\n')[0]}`, logger.LOG_LEVELS.INFO);
            if (attempts < CAPTURE_CONFIG.maxRetries) await new Promise(r => setTimeout(r, 3000));
            else throw new Error(`è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°`);
        }
    }

    await ensurePageReady(page);
    await handleGuidePopup(page);
    await checkAndClickCookieBanner(page);
    
    logger.log(`[Init] ğŸ–±ï¸ æ¿€æ´»å³ä¾§åŒºåŸŸ...`, logger.LOG_LEVELS.INFO);
    const viewport = await page.evaluate(() => ({ width: window.innerWidth, height: window.innerHeight }));
    await page.mouse.move(viewport.width / 2, viewport.height / 2);
    await page.waitForTimeout(500);
    await page.mouse.move(viewport.width * 0.8, viewport.height / 2);
    
    await page.evaluate(async () => {
        window.scrollTo(0, 500); await new Promise(r => setTimeout(r, 500));
        window.scrollTo(0, 0);   await new Promise(r => setTimeout(r, 500));
    });

    logger.log(`[Loop] ğŸš€ å¼€å§‹ç›‘å¬ [${CAPTURE_CONFIG.targetCategory}] (Strict Sort: migrateTime Desc)...`, logger.LOG_LEVELS.INFO);

    let lastTopSymbol = '';
    let loopCount = 0;
    let noDataCount = 0;

    setInterval(async () => {
        loopCount++;

        try {
            const scanResult: any = await page.evaluate(() => {
                // @ts-ignore
                if (!window.MemeScannerEngine) return null;
                // @ts-ignore
                return { lists: window.MemeScannerEngine.scan() };
            }).catch(async (e) => {
                if (e.message.includes('Execution context was destroyed')) {
                    await page.evaluate(SCANNER_LOGIC_SCRIPT).catch(() => {});
                }
                return null;
            });

            if (scanResult && scanResult.lists && scanResult.lists.length > 0) {
                noDataCount = 0;
                const lists = scanResult.lists;
                const targetLists = lists.filter((l:any) => l.type === CAPTURE_CONFIG.targetCategory);
                
                if (targetLists.length > 0) {
                    targetLists.sort((a:any, b:any) => b.time - a.time);
                    const bestList = targetLists[0];
                    const topData = bestList.data;

                    if (topData && topData.length > 0) {
                        // ğŸ”¥ å¼ºåˆ¶æ’åºï¼šæŒ‰ migrateTime å€’åº
                        topData.sort((a: any, b: any) => {
                            const tA = parseInt(a.migrateTime || '0');
                            const tB = parseInt(b.migrateTime || '0');
                            return tB - tA;
                        });

                        const firstRaw = topData[0];
                        const currentSymbol = firstRaw.symbol;
                        const showTime = parseInt(firstRaw.migrateTime || firstRaw.createTime);

                        if (currentSymbol !== lastTopSymbol) {
                            console.log('\n'); 
                            logger.log(
                                `ğŸ”¥ [NEW MIGRATED] Symbol: ${currentSymbol} | Count: ${bestList.count} | MigratedTime: ${new Date(showTime).toLocaleTimeString()}`,
                                logger.LOG_LEVELS.INFO
                            );
                            
                            // ğŸ”¥ è¯¦ç»†éªŒè¯ï¼šæ‰“å°å‰ä¸‰åçš„æ—¶é—´ï¼Œè¯æ˜æ˜¯æ’åºè¿‡çš„
                            console.log('--------------------------------------------------');
                            console.log('âœ… [Verify Sorting] Top 3 Latest Migrated Tokens:');
                            topData.slice(0, 5).forEach((item: any, idx: number) => {
                                const mt = parseInt(item.migrateTime || '0');
                                console.log(`   #${idx+1} ${item.symbol.padEnd(8)} | Time: ${new Date(mt).toLocaleTimeString()} (${mt})`);
                            });
                            console.log('--------------------------------------------------');

                            lastTopSymbol = currentSymbol;
                        }
                        
                        if (loopCount % 5 === 0) {
                            process.stdout.write(`\r[Scan #${loopCount}] Migrated: ${topData.length} items [Top: ${currentSymbol}]      `);
                        }

                        const items = normalizeData(topData.slice(0, 40));
                        socket.emit('data-update', { 
                            category: `meme_${CAPTURE_CONFIG.targetCategory}`, 
                            type: 'full', 
                            data: items 
                        });
                    }
                } else {
                    if (loopCount % 5 === 0) process.stdout.write(`\r[Scan #${loopCount}] â³ No migrated lists yet...`);
                }
            } else {
                noDataCount++;
                if (loopCount % 5 === 0) process.stdout.write(`\r[Scan #${loopCount}] â³ æš‚æ— æ•°æ®...`);
                
                if (noDataCount > 30) {
                    logger.log(`\n[Auto-Fix] æ•°æ®æµä¸­æ–­ï¼Œåˆ·æ–°é¡µé¢...`, logger.LOG_LEVELS.INFO);
                    noDataCount = 0;
                    await page.reload({ waitUntil: 'commit' });
                    await ensurePageReady(page);
                }
            }

        } catch (err: any) {
            if (!err.message.includes('Context was destroyed')) {
                logger.log(`\nâŒ Loop Error: ${err.message}`, logger.LOG_LEVELS.ERROR);
            }
        }
    }, CAPTURE_CONFIG.interval);

    await new Promise(() => {});

} catch (error: any) {
    logger.log(`âŒ Setup Error: ${error.message}`, logger.LOG_LEVELS.ERROR);
}
  }async function main() {logger.init();const socket: Socket = io(SERVER_URL);let browser: Browser | undefined; code Codedownloadcontent_copyexpand_less    try {
    browser = await chromium.launch({
        executablePath: MY_CHROME_PATH,
        headless: false,
        args: [
            '--start-maximized',
            '--no-sandbox',
            '--disable-blink-features=AutomationControlled',
            `--proxy-server=${CAPTURE_CONFIG.proxy}`,
            '--ignore-certificate-errors'
        ],
    });

    await setupMemePage(browser, socket);

} catch (e: any) {
    logger.log(`âŒ Main Error: ${e.stack}`, logger.LOG_LEVELS.ERROR);
}
  }main();]]></file>2. æ›´æ–° Types å®šä¹‰åœ¨ frontend/src/types.ts ä¸­æ·»åŠ è¿™äº›æ–°å­—æ®µã€‚<file path="packages/frontend/src/types.ts"><![CDATA[// packages/frontend/src/types.ts// --- K-Line Related Types ---export interface LightweightChartKline {time: number;open: number;high: number;low: number;close: number;volume: number;}export interface KlineData {primaryKey: string;address: string;chain: string;interval: string;timestamp: number;time: number;open: number;high: number;low: number;close: number;volume: number;}export interface KlineUpdatePayload {room: string;data: LightweightChartKline;}export interface KlineFetchErrorPayload {key: string;error: string;}// --- Meme / Market Data Types ---// âœ¨ MemeItem æ¥å£æ‰©å±•export interface MemeItem {chain: string;contractAddress: string;symbol: string;icon?: string; code Codedownloadcontent_copyexpand_less    name: string;
progress: number;
holders: number;
devMigrateCount?: number;

// æ—¶é—´ç›¸å…³
createTime: number; 
migrateTime?: number; // âœ¨ æ–°å¢ï¼šè¿ç§»æ—¶é—´

status?: string;      
updateTime?: number;  

twitter?: string;
telegram?: string;
website?: string;
twitterId?: string;   

liquidity?: number;
marketCap?: number;
volume?: number;

// âœ¨ æ–°å¢çƒ­åº¦/é£é™©å­—æ®µ
countBuy?: number;            // ä¹°å•æ•°
countSell?: number;           // å–å•æ•°
holdersSniperPercent?: number; // ç‹™å‡»æ‰‹å æ¯”
paidOnDexScreener?: boolean;   // æ˜¯å¦ä»˜è´¹ DexScreener

narrative?: string;   
source?: string;
  }export type DataAction = 'snapshot' | 'update';export type LocalDataPayload<T> = {category: string;type: DataAction;data: T[];};]]></file>3. æ›´æ–°å‰ç«¯å¡ç‰‡ç»„ä»¶ (MemePage)è¿™æ˜¯é‡å¤´æˆã€‚æˆ‘ä¼šåœ¨ MemeCard ä¸­æ·»åŠ ä»¥ä¸‹è§†è§‰å…ƒç´ ï¼šSpeed Badge: æ˜¾ç¤ºä»åˆ›å»ºåˆ°å‘å°„çš„è€—æ—¶ã€‚< 30min: çº¢è‰²ç«ç„° ğŸ”¥ (æé€Ÿ)< 2h: æ©™è‰² âš¡> 2h: ç°è‰² ğŸ¢Risk Badge: holdersSniperPercent > 50% æ˜¾ç¤ºçº¢è‰²è­¦å‘Šã€‚Marketing Badge: paidOnDexScreener ä¸º true æ—¶æ˜¾ç¤ºé‡‘è‰² ADS æ ‡ã€‚Buy/Sell Ratio: æ˜¾ç¤ºå…·ä½“çš„ä¹°å–å•æ•°ã€‚<file path="packages/frontend/src/MemePage.tsx"><![CDATA[// packages/frontend/src/MemePage.tsximport { Component, createMemo, For, Show, onMount, createSignal } from 'solid-js';import { useMarketData } from './hooks/useMarketData';import type { MemeItem } from './types';const BACKEND_URL = 'http://localhost:3001';declare global {interface Window {twttr: any;}}interface MemeCardProps {item: MemeItem;}interface ColumnProps {title: string;items: MemeItem[];count: number;}// ID æå–const extractTweetId = (input: string | undefined | null): string | null => {if (!input) return null;const str = String(input).trim();if (/^\d+$/.test(str)) return str;const match = str.match(/status/(\d+)/);if (match && match[1]) return match[1];return null;};// è¾…åŠ©ï¼šæ—¶é—´æ ¼å¼åŒ–const formatTime = (ts: number | undefined) => {if (!ts) return '';return new Date(ts).toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });};// âœ¨ æ ¸å¿ƒé€»è¾‘ï¼šè®¡ç®—â€œå‘å°„é€Ÿåº¦â€const getBondingDuration = (item: MemeItem): { text: string; color: string; icon: string } | null => {if (!item.migrateTime || !item.createTime || item.migrateTime <= 0) return null; code Codedownloadcontent_copyexpand_less    const diffMs = item.migrateTime - item.createTime;
const diffMins = Math.floor(diffMs / (1000 * 60));
const diffHours = Math.floor(diffMins / 60);

// æé€Ÿé‡‘ç‹—ï¼šå°äº 30 åˆ†é’Ÿ
if (diffMins < 30) {
    return { text: `${diffMins}m`, color: '#dc3545', icon: 'ğŸ”¥' }; // Red Fire
}
// å¿«é€Ÿï¼šå°äº 2 å°æ—¶
if (diffHours < 2) {
    return { text: `${diffMins}m`, color: '#fd7e14', icon: 'âš¡' }; // Orange Bolt
}
// æ™®é€š
if (diffHours < 24) {
    return { text: `${diffHours}h`, color: '#6c757d', icon: 'â±' }; // Gray
}
return { text: '>1d', color: '#6c757d', icon: 'ğŸ¢' };
  };// --- æ¨ç‰¹ç»„ä»¶ (ä¿æŒä¸å˜) ---const TweetEmbed: Component<{ tweetId: string; }> = (props) => {let containerRef: HTMLDivElement | undefined;const [isLoaded, setIsLoaded] = createSignal(false); code Codedownloadcontent_copyexpand_less    onMount(() => {
    if (!props.tweetId) return;
    if (!window.twttr) {
        const script = document.createElement('script');
        script.src = 'https://platform.twitter.com/widgets.js';
        script.async = true;
        document.head.appendChild(script);
    }
    const renderTweet = () => {
        if (window.twttr && window.twttr.widgets && containerRef) {
            containerRef.innerHTML = '';
            window.twttr.widgets.createTweet(props.tweetId, containerRef, {
                    theme: 'light', lang: 'zh-cn', dnt: true, conversation: 'none', cards: 'visible', width: 'auto', align: 'center'
            }).then((el: any) => { if (el) setIsLoaded(true); else containerRef!.innerHTML = `<div style="color:#ccc; font-size:11px; padding:10px; text-align:center;">Tweet unavailable</div>`; });
        } else { setTimeout(renderTweet, 200); }
    };
    renderTweet();
});

return (
    <div class="tweet-embed-wrapper" style={{ "min-height": isLoaded() ? "auto" : "150px", "width": "100%", "background": isLoaded() ? "transparent" : "#f8f9fa", "border-radius": "8px", "display": "flex", "justify-content": "center", "align-items": "center", "margin-top": "8px", "border": isLoaded() ? "none" : "1px dashed #e1e4e8" }}>
        <div ref={containerRef} style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>
            <span style={{ color: '#aaa', fontSize: '11px' }}>Loading Tweet...</span>
        </div>
    </div>
);
  };// --- å¡ç‰‡ç»„ä»¶ ---const MemeCard: Component<MemeCardProps> = (props) => {const { item } = props;const cleanTwitterId = createMemo(() => extractTweetId(item.twitterId || item.twitter));const iconUrl = item.icon ? ${BACKEND_URL}/image-proxy?url=${encodeURIComponent(item.icon)} : '';const speed = createMemo(() => getBondingDuration(item)); code Codedownloadcontent_copyexpand_less    const handleCardClick = () => {
    window.open(`/token.html?address=${item.contractAddress}&chain=${item.chain}`, '_blank');
};

const handleContentClick = (e: MouseEvent) => e.stopPropagation();

const formattedCap = () => {
    if (!item.marketCap) return '-';
    if (item.marketCap >= 1000000) return (item.marketCap / 1000000).toFixed(1) + 'M';
    if (item.marketCap >= 1000) return (item.marketCap / 1000).toFixed(1) + 'K';
    return item.marketCap.toString();
};

return (
    <div class="meme-card" onClick={handleCardClick}>
        {/* Header */}
        <div class="card-header-layout">
            <Show when={item.icon} fallback={<div style={{ width: '42px', height: '42px', background: '#eee', borderRadius: '50%' }}></div>}>
                <img src={iconUrl} class="card-icon" loading="lazy" onError={(e) => e.currentTarget.style.display = 'none'} />
            </Show>

            <div class="card-info-col">
                <div class="info-row-top">
                    <div style={{display:'flex', alignItems:'center', gap: '6px', maxWidth: '180px'}}>
                        <span class="card-symbol" title={item.symbol}>{item.symbol}</span>
                        {/* âœ¨ 1. ä»˜è´¹æ¨å¹¿é‡‘æ ‡ */}
                        <Show when={item.paidOnDexScreener}>
                            <span title="Paid on DexScreener" style={{ fontSize: '0.6em', background: '#ffd700', color: '#856404', padding: '1px 3px', borderRadius: '3px', border: '1px solid #ffeeba', fontWeight: 'bold' }}>
                                AD
                            </span>
                        </Show>
                    </div>
                    
                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>
                        {/* âœ¨ 2. å‘å°„é€Ÿåº¦å¾½ç«  */}
                        <Show when={speed()}>
                            <span style={{ 
                                fontSize: '0.7em', 
                                color: speed()!.color, 
                                fontWeight: 'bold', 
                                display: 'flex', 
                                alignItems: 'center',
                                background: `${speed()!.color}15`, // 10% opacity bg
                                padding: '1px 5px',
                                borderRadius: '4px'
                            }}>
                                {speed()!.icon} {speed()!.text}
                            </span>
                        </Show>
                        <span class="card-time">{formatTime(item.migrateTime || item.createTime || Date.now())}</span>
                    </div>
                </div>

                <div class="info-row-bottom">
                    <span class="stat-badge badge-cap">${formattedCap()}</span>
                    
                    {/* âœ¨ 3. ä¹°å–åŠ›åº¦ */}
                    <Show when={item.countBuy !== undefined && item.countSell !== undefined}>
                         <span class="stat-badge" title={`Buys: ${item.countBuy} / Sells: ${item.countSell}`}>
                            <span style={{color: '#28a745'}}>{item.countBuy}</span>
                            <span style={{opacity: 0.3, margin: '0 2px'}}>/</span>
                            <span style={{color: '#dc3545'}}>{item.countSell}</span>
                         </span>
                    </Show>

                    <span class="stat-badge">ğŸ‘¥ {item.holders || '-'}</span>

                    {/* âœ¨ 4. ç‹™å‡»æ‰‹è­¦å‘Š */}
                    <Show when={(item.holdersSniperPercent || 0) > 50}>
                         <span class="stat-badge" style={{ background: '#fff5f5', color: '#e03131', borderColor: '#ffc9c9' }} title={`Sniper Holdings: ${item.holdersSniperPercent}%`}>
                            ğŸ¯ {Math.round(item.holdersSniperPercent!)}%
                         </span>
                    </Show>

                    <Show when={(item.devMigrateCount || 0) > 0}>
                        <span class="stat-badge badge-dev">Dev:{item.devMigrateCount}</span>
                    </Show>
                </div>
            </div>
        </div>

        {/* Narrative */}
        <Show when={item.narrative}>
            <div class="card-narrative-box" onClick={handleContentClick}>
                {item.narrative}
            </div>
        </Show>

        {/* Tweet */}
        <Show when={cleanTwitterId()}>
            <div onClick={handleContentClick} style={{ width: '100%', overflow: 'hidden' }}>
                <TweetEmbed tweetId={cleanTwitterId()!} />
            </div>
        </Show>

        {/* Bonding Curve */}
        <div class="card-bonding-line" title={`Bonding Curve: ${item.progress?.toFixed(1)}%`}>
            <div
                class="bonding-fill"
                style={{
                    width: `${Math.min(item.progress || 0, 100)}%`,
                    "background-color": (item.progress || 0) > 90 ? '#28a745' : '#007bff'
                }}
            ></div>
        </div>
    </div>
);
  };// --- Column ---const MemeColumn: Component<ColumnProps> = (props) => {return (<div class="meme-column"><div class="column-header"><span>{props.title}</span><span class="column-badge" style={{ background: '#dce4ea', padding: '2px 8px', borderRadius: '10px', fontSize: '0.85em' }}>{props.count}</span></div><div class="column-content"><For each={props.items}>{(item) => <MemeCard item={item} />}</For><Show when={props.items.length === 0}><div style={{ textAlign: 'center', padding: '50px 0', color: '#999', fontSize: '0.9em', gridColumn: '1 / -1' }}>Waiting for data...</div></Show></div></div>);};// --- Page ---const MemePage: Component = () => {const {marketData: migratedMemeData,connectionStatus: migratedStatus,lastUpdate} = useMarketData<MemeItem>('meme_migrated'); code Codedownloadcontent_copyexpand_less    const migratedTokens = createMemo(() => {
    // âœ¨ æŒ‰è¿ç§»æ—¶é—´å€’åºï¼Œæœ€æ–°çš„åœ¨ä¸Šé¢
    const sorted = migratedMemeData
        .slice()
        .sort((a, b) => (b.migrateTime || 0) - (a.migrateTime || 0));

    if (sorted.length > 0) {
        console.log(`[MemePage] ğŸ¦‹ Top Token: ${sorted[0].symbol}, Migrated At: ${new Date(sorted[0].migrateTime!).toLocaleTimeString()}`);
    }
    return sorted;
});

onMount(() => console.log('[MemePage] ğŸš€ Migrated-Only Layout Mounted.'));

return (
    <div class="meme-board-container">
        <header class="meme-header">
            <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>
                <h1>ğŸ¶ Meme Rush <span style={{ fontSize: '0.6em', color: '#999', fontWeight: 'normal' }}>KANBAN</span></h1>
                <nav class="nav-links" style={{ display: 'flex', gap: '10px' }}>
                    <a href="/" class="nav-btn" style={{ textDecoration: 'none', color: '#666', fontSize: '0.9rem' }}>ğŸ”¥ Hotlist</a>
                    <span class="nav-btn active" style={{ fontWeight: 'bold', color: '#007bff', background: '#e7f1ff', padding: '4px 10px', borderRadius: '4px', fontSize: '0.9rem' }}>å·²å‘å°„çœ‹æ¿</span>
                </nav>
            </div>
            <div style={{ display: 'flex', gap: '15px', alignItems: 'center', fontSize: '0.85em', color: '#666' }}>
                <div>â± {lastUpdate()}</div>
                <div class="status-indicator" title="Migrated Tokens Feed">
                    <span style={{
                        display: 'inline-block', width: '8px', height: '8px', borderRadius: '50%',
                        background: migratedStatus().includes('Connected') ? '#28a745' : '#dc3545',
                        marginRight: '4px'
                    }}></span>
                    {migratedStatus()}
                </div>
            </div>
        </header>

        <div class="meme-board-grid">
            <MemeColumn title="ğŸ¦‹ å·²å‘å°„/é‡‘ç‹— (Migrated)" items={migratedTokens()} count={migratedTokens().length} />
        </div>
    </div>
);
  };export default MemePage;]]></file>